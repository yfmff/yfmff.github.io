<!DOCTYPE html>
<html lang="zh-CN">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)" />
<meta name="generator" content="Hugo 0.104.3" />
<link rel="shortcut icon" type="image/x-icon" href="/sys/favor.jpg">
<link rel="icon" type="image/x-icon" href="/sys/favor.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="/sys/favor.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="/sys/favor.jpg">
<link rel="apple-touch-icon" sizes="180x180" href="/sys/favor.jpg">
<meta itemprop="name" content="Qt 模型-视图：自定义委托" />
<meta itemprop="description" content="" />
<meta itemprop="datePublished" ZgotmplZ />
<meta itemprop="dateModified" ZgotmplZ />
<meta itemprop="image" content="https://gitee.com/sys/head.jpg" />
<meta itemprop="keywords" content="qt-Model-View" />

<meta property="og:type" content="article" />
<meta property="og:title" content="Qt 模型-视图：自定义委托" />
<meta property="og:description" content="" />
<meta property="og:image" content="/sys/head.jpg" />
<meta property="og:image:width" content="312" />
<meta property="og:image:height" content="312" />
<meta property="og:image:type" content="image/jpeg/png/svg/jpg" />
<meta property="og:url" content="https://gitee.com/miffy-fly/Blog.git/post/qt/qtdelegate/"/>
<meta property="og:site_name" content="孟方方的博客" />
<meta property="og:locale" content="zh-CN"/>
<meta property="article:author" content="孟方方" />
<meta property="article:published_time" content="2022-10-07 00:00:00 &#43;0000 UTC" />
<meta property="article:modified_time" content="2022-10-07 00:00:00 &#43;0000 UTC" />


  
  <link type="text/css" rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.1.2/css/all.min.css" />
  
  <link type="text/css" rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" />


<link rel="stylesheet" href="/miffy-fly/Blog.git/css/main.min.c443fa3d6006bbe686c787cccb9273c628499f2cc10d7ab4712962d7eedb3f58.css">
  <style type="text/css">
    .post-footer, .flinks-list-footer hr:after {
      content: "~ 我可是有底线的哟 ~";
    }
  </style>
  <script class="next-config" data-name="page" type="application/json">{"comments":false,"isHome":false,"isPage":true,"path":"qtdelegate","permalink":"https://gitee.com/miffy-fly/Blog.git/post/qt/qtdelegate/","title":"Qt 模型-视图：自定义委托"}</script>
  <script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    var script = document.createElement('script');
      
    script.charset = "UTF-8";
    script.src     = "https:\/\/busuanzi.ibruce.info\/busuanzi\/2.3\/busuanzi.pure.mini.js";
    script.async   = "true"

    document.head.appendChild(script);
  });
</script>




  <title>Qt 模型-视图：自定义委托 - 孟方方的博客</title>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage"  class="use-motion" >
  <div class="headband"></div>
  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
<div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">孟方方的博客</h1>
      <i class="logo-line"></i>
    </a>
    
      <p class="site-subtitle" itemprop="description">新的一天，开始了</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
      
      <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>

<nav class="site-nav">
  <ul class="main-menu menu">
    <li class="menu-item menu-item-home">
      <a href="/miffy-fly/Blog.git/" class="hvr-icon-pulse " rel="section"><i class="fa fa-home hvr-icon"></i>首页
      </a>
    </li>
    <li class="menu-item menu-item-about">
      <a href="/miffy-fly/Blog.git/about.html" class="hvr-icon-pulse " rel="section"><i class="fa fa-user hvr-icon"></i>关于
      </a>
    </li>
    <li class="menu-item menu-item-archives">
      <a href="/miffy-fly/Blog.git/archives/" class="hvr-icon-pulse " rel="section"><i class="fa fa-archive hvr-icon"></i>归档
        <span class="badge">42</span>
      </a>
    </li>
    <li class="menu-item menu-item-search">
      <a role="button" class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索
      </a>
    </li>
  </ul>
</nav>

  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>
    </div>
  </div>
      </div>
      <div class="toggle sidebar-toggle" role="button">
  <span class="toggle-line"></span>
  <span class="toggle-line"></span>
  <span class="toggle-line"></span>
</div>
<aside class="sidebar">
  
  <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
    <ul class="sidebar-nav">
      <li class="sidebar-nav-toc">
        文章目录
      </li>
      <li class="sidebar-nav-overview">
        站点概览
      </li>
    </ul>
    <div class="sidebar-panel-container">
      
      <div class="post-toc-wrap sidebar-panel">
        <div class="post-toc animated"><nav id="TableOfContents">
  <ul>
    <li><a href="#qabstractitemdelegate基本原理">QAbstractItemDelegate基本原理</a></li>
    <li><a href="#qabstractitemdelegate类中的函数">QAbstractItemDelegate类中的函数</a>
      <ul>
        <li><a href="#函数">函数：</a></li>
        <li><a href="#信号">信号</a></li>
      </ul>
    </li>
    <li><a href="#qstyleoptionviewitem">QStyleOptionViewItem</a>
      <ul>
        <li><a href="#基本原理">基本原理</a></li>
        <li><a href="#qstyleoptionviewitem成员变量">QStyleOptionViewItem成员变量</a></li>
      </ul>
    </li>
    <li><a href="#实例1">实例1</a></li>
    <li><a href="#实例2">实例2</a></li>
  </ul>
</nav></div>
      </div>
      
      <div class="site-overview-wrap sidebar-panel">
<div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="孟方方"
      src="/sys/head.jpg">
  <p class="site-author-name" itemprop="name">孟方方</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
    <div class="site-state-item site-state-posts">
      <a href="/archives/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">
      <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </a>
    </div>
    <div class="site-state-item site-state-tags">
      <a href="/tags/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
      </a>
    </div>
  </nav>
</div>
<div class="links-of-social site-overview-item animated">


  <span class="links-of-social-item">
    <a href="mailto:1227502607@qq.com" title="E-Mail → mailto:1227502607@qq.com" rel="noopener" class="hvr-icon-pulse" target="_blank">
      <i class="fa fa-envelope fa-fw  hvr-icon "></i>E-Mail
    </a>
  </span>
</div>
<div class="cc-license animated" itemprop="license">
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank" title="共享知识">
    <img src="/imgs/cc/big/by_nc_sa.svg" alt="共享知识">
  </a>
</div>
      </div>
    </div>
   
  </div>
<div class="sidebar-card-widget">
  <div class="item-headline">
    <i class="fas fa-chart-line"></i>
    <span>网站资讯</span>
  </div>
  <div class="siteinfo">
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa-solid fa-calendar-check"></i>已运行：</div>
      <div class="item-count" id="runTimes" data-publishdate="2021-09-02T00:00:00&#43;00:00"></div>
    </div>
      <div class="siteinfo-item">
        <div class="item-name">
          <i class="fas fa fa-user"></i>总访客数：
        </div>
        <div class="item-count" id="busuanzi_value_site_uv"></div>
      </div>
      <div class="siteinfo-item">
        <div class="item-name">
          <i class="fas fa fa-eye"></i>页面浏览：
        </div>
        <div class="item-count" id="busuanzi_value_site_pv"></div>
      </div>
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-font"></i>总字数：</div>
      <div class="item-count" id="wordsCount" data-count="84337"></div>
    </div>
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-mug-hot"></i>阅读约：</div>
      <div class="item-count" id="readTimes" data-times="192"></div>
    </div>
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-clock-rotate-left"></i>最后更新于：</div>
      <div class="item-count" id="last-push-date" data-lastpushdate="2022-10-19T00:00:00&#43;00:00"></div>
    </div>
  </div>
</div>
</aside>
<div class="sidebar-dimmer"></div>

    </header>
    
    <div class="tool-buttons" >
  <a id="goto-comments" class="button goto-comments" href="#comments"  title="直达评论">
    <i class="fas fa-comments"></i>
  </a> 
  <div id="switch-theme" class="button" title="深浅模式切换">
    <i class="fas fa-adjust"></i>
  </div> 
  
  <div class="back-to-top" role="button" title="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div> 
</div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
    <div class="main-inner post posts-expand">
      
  <div class="post-block">
  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://gitee.com/miffy-fly/Blog.git/post/qt/qtdelegate/">
    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/sys/head.jpg">
      <meta itemprop="name" content="孟方方">
    </span>
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="孟方方">
      <meta itemprop="description" content="">
    </span>
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Qt 模型-视图：自定义委托">
      <meta itemprop="description" content="">
    </span>
    <header class="post-header">
       <h1 class="post-title" itemprop="name headline">Qt 模型-视图：自定义委托 </h1> <div class="post-meta-container">
  <div class="post-meta-items">
    


<span class="post-meta-item">
  <span class="post-meta-item-icon">
    <i class="far fa-calendar"></i>
  </span>
  <span class="post-meta-item-text">发表于：</span>
  <time title="发表于：2022-10-07 00:00:00 &#43;0000 UTC" itemprop="dateCreated datePublished" datetime="2022-10-07 00:00:00 &#43;0000 UTC">2022-10-07</time>
</span>
    
    
<span class="post-meta-item">
  <span class="post-meta-item-icon">
    <i class="far fa-folder-open"></i>
  </span>
  <span class="post-meta-item-text">分类于：</span>
  <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
    <a href="/categories/qt" itemprop="url" rel="index">
      <span itemprop="name">qt</span>
    </a>
  </span>
</span>
  </div>
  <div class="post-meta-items">
    
<span class="post-meta-item" title="字数">
  <span class="post-meta-item-icon">
    <i class="far fa-file-word"></i>
  </span>
  <span class="post-meta-item-text">字数：</span><span>3013</span>
</span>
    
<span class="post-meta-item" title="阅读">
  <span class="post-meta-item-icon">
    <i class="far fa-clock"></i>
  </span>
  <span class="post-meta-item-text">阅读：&asymp;</span>
  <span>7分钟</span>
</span>

    
<span class="post-meta-item" title="浏览">
  <span class="post-meta-item-icon">
    <i class="far fa-eye"></i>
  </span>
  <span class="post-meta-item-text">
  浏览：
  </span>
  <span id="busuanzi_value_page_pv" data-path="/miffy-fly/Blog.git/post/qt/qtdelegate/"><i class="fa fa-sync fa-spin"></i></span>
</span>

  </div>
  
</div>

    </header>
    
    <div class="post-body  autonumber " itemprop="articleBody">
      
  <p><img src="http://browser9.qhimg.com/bdr/__85/t0100dc32508c7e4d7a.jpg" alt=""></p>
<h2 id="qabstractitemdelegate基本原理">QAbstractItemDelegate基本原理</h2>
<p><strong>QAbstractItemDelegate</strong>继承自<strong>QObject</strong>，Qt中委托用于显示视图中的单个项目，并处理模型数据的编辑。QAbstractDelegate的子类<strong>QItemDelegate</strong>和<strong>QStyleItemDelegate</strong>是Qt提供的对QAbstractDelegate类的默认实现。</p>
<div class="note info ">
  若需要以自定义方式渲染项目，则必须重新实现paint()和sizeHint()函数。可使用如下两种方法实现自定义的编辑：  <br>
1)、创建一个编辑器部件，并将其设置为项目的编辑器，此方法必须重新实现 <strong>createEditor()</strong> 函数，并使用 <strong>setEditorData()</strong> 函数从模型中获取数据用于编辑器，使用 <strong>setModelData()</strong> 把编辑器的内容写入模型中。  <br>
2)、重新实现 <strong>editorEvent()</strong> 函数，直接处理用户事件。
</div>
<h2 id="qabstractitemdelegate类中的函数">QAbstractItemDelegate类中的函数</h2>
<div class="note warning ">
  <strong>QAbstractItemDelegate</strong> 类中的函数都是虚函数，这些函数的参数都附带有必要的信息，比如对于 <strong>paint()</strong> 函数的index参数，就是表示需要绘制的模型的索引，且<strong>index.data()</strong> 函数包含有来自模型的数据。在重新实现这些虚函数时，应合理使用这些参数所附带的信息。
</div>
<h3 id="函数">函数：</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-1"> 1</a></span><span><span style="color:#75715e">// 若要提供自定义的渲染，则必须重新实现此函数。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-2"> 2</a></span><span><span style="color:#75715e">// 使用**Painter**和外观**option**来渲染索引**index**指定的项。若重新实现此函数，还必须重新实现**sizeHint()**。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-3"> 3</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">paint</span>(QPainter <span style="color:#f92672">*</span>painter, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span><span style="color:#960050;background-color:#1e0010">；</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-4"> 4</a></span><span><span style="color:#66d9ef">virtual</span> QSize sizeHint(<span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-5"> 5</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-6"> 6</a></span><span><span style="color:#75715e">// 返回用于编辑索引index所指数据项的编辑器。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-7"> 7</a></span><span><span style="color:#75715e">//index包含正在使用的模型的信息。parent表示编辑器的父部件，项目选项由option指定。默认实现返回0。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-8"> 8</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> QWidget <span style="color:#f92672">*</span><span style="color:#a6e22e">createEditor</span>(QWidget <span style="color:#f92672">*</span>parent, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-9"> 9</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-10">10</a></span><span><span style="color:#75715e">// 设置编辑器数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-11">11</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setEditorData</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-12">12</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-13">13</a></span><span><span style="color:#75715e">// 将编辑器数据写到模型中
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-14">14</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setModelData</span>(QWidget <span style="color:#f92672">*</span>editor, QAbstractItemModel <span style="color:#f92672">*</span>model, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-15">15</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-16">16</a></span><span><span style="color:#75715e">// 根据option中的矩形，更新索引index所指项目的编辑器的几何尺寸，该函数决定编辑器在视图中的位置和大小。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-17">17</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateEditorGeometry</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-18">18</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-19">19</a></span><span><span style="color:#75715e">// 当编辑器editor不再需要编辑索引index所指的数据项且应该被销毁时调用。该函数用于销毁editor。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-20">20</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyEditor</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-21">21</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-22">22</a></span><span><span style="color:#75715e">// 在开始编辑项时会调用，event为触发的事件，model、index分别是这个被编辑项目的模型和索引，option为渲染项目的选项。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-23">23</a></span><span><span style="color:#75715e">// 即使鼠标事件没有开始编辑该项目，也UI被发送给editorEvent，比如在当前项按下鼠标右键试图打开右键菜单，默认返回false
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-24">24</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">editorEvent</span>(QEvent <span style="color:#f92672">*</span>event, QAbstractItemModel <span style="color:#f92672">*</span>model, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-25"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-25">25</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-26"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-26">26</a></span><span><span style="color:#75715e">// 发生帮助事件时会调用该函数，若委托处理此事件则返回true。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-27"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-27">27</a></span><span><span style="color:#75715e">// 对于成功处理的QEvennt::ToolTip和QEvent::WhatsThis事件，根据系统配置显示相关窗口。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-28"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-28">28</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">helpEvent</span>(QHelpEvent <span style="color:#f92672">*</span>event, QAbstractItemView <span style="color:#f92672">*</span>view, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index);
</span></span></code></pre></div><h3 id="信号">信号</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-1">1</a></span><span><span style="color:#75715e">// 当编辑器editor编辑完成后并将其写回模型时，必须发送此信号。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-2">2</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">commitData</span>(QWidget <span style="color:#f92672">*</span>editor);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-3">3</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-4">4</a></span><span><span style="color:#75715e">// 当索引的index的sizeHint()变化时，必须发送此信号，视图自动连接此信号，并重新布局。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-5">5</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sizeHintChanged</span>(<span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-6">6</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-7">7</a></span><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeEditor</span>(QWidget <span style="color:#f92672">*</span>editor, QAbstractItemDelegate<span style="color:#f92672">::</span>EndEditHint hint <span style="color:#f92672">=</span> NoHint);
</span></span></code></pre></div><div class="note info ">
  closeEditor：用户使用编辑器editor完成编辑时，发送此信号。hint为委托提供了编辑完成后影响模型和视图行为的方式，可以指示组件接下来执行什么操作，比如hint为<strong>EditNextItem</strong>，则 视图应使用委托打开下一个项目的编辑器。枚举<strong>EndEditHint</strong>值见下表。
</div>
<table>
<thead>
<tr>
<th>QAbstractItemDelegate::EndEditHint</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>QAbstractItemDelegate::NoHint</strong></td>
<td>什么都不做</td>
</tr>
<tr>
<td><strong>QAbstractItemDelegate::EditNextItem</strong></td>
<td>在下一个项上打开编辑器</td>
</tr>
<tr>
<td><strong>QAbstractItemDelegate::EditPreviousItem</strong></td>
<td>在上一个项上打开编辑器</td>
</tr>
<tr>
<td><strong>AbstractItemDelegate::SubmitModelCache</strong></td>
<td>若模型缓存数据，则把数据写入底层数据存储</td>
</tr>
<tr>
<td><strong>QAbstractItemDelegate::RevertModelCache</strong></td>
<td>若模型缓存数据，则放弃缓存数据并将其替换为底层存储中的数据</td>
</tr>
</tbody>
</table>
<h2 id="qstyleoptionviewitem">QStyleOptionViewItem</h2>
<p>QStyleOptionViewItem类继承自<strong>QStyleOption</strong>。</p>
<h3 id="基本原理">基本原理</h3>
<p>Qt内置的部件的外观几乎都是由<strong>QStyle</strong>类的成员函数进行绘制的，使用这些函数绘制部件时需要向函数提供一些所需绘制图形元素的信息，而这些信息是由<strong>QStyleOption</strong>类及其子类进行描述的，QStyleOption类的不同子类描述了不同图形元素所需的信息，比如<strong>QStyleOptionButton</strong>描述了绘制按钮所需的有关信息等。因此模型/视图结构中的<strong>QStyleOptionViewItem</strong>类描述了绘制数据项所需的有关信息。</p>
<h3 id="qstyleoptionviewitem成员变量">QStyleOptionViewItem成员变量</h3>
<div class="note info ">
  项目的装饰（decoration）通常指的是图标，与<strong>Qt::DecorationRole</strong>对应
</div>
<table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>QBrush</strong> backgroundBrush</td>
<td>绘制项背景</td>
</tr>
<tr>
<td><strong>Qt::CheckState</strong> checkState</td>
<td>被选中为true</td>
</tr>
<tr>
<td><strong>Qt::Alignment</strong> decorationAlignment</td>
<td>项的对齐方式，默认左对齐</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Position</strong> decorationPosition</td>
<td>项目装饰位置，默认左对齐</td>
</tr>
<tr>
<td><strong>QSize</strong> decorationSize</td>
<td>默认装饰大小</td>
</tr>
<tr>
<td><strong>Qt::Alignment</strong> displayAlignment</td>
<td>项显示值的对齐方式</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::ViewItemFeatures</strong> features</td>
<td>描述项目特征</td>
</tr>
<tr>
<td><strong>QFont</strong> font</td>
<td>项的字体</td>
</tr>
<tr>
<td><strong>QIcon</strong> icon</td>
<td>绘制在项的图标</td>
</tr>
<tr>
<td><strong>QModelIndex</strong> index</td>
<td>需要绘制的模型的索引</td>
</tr>
<tr>
<td><strong>bool</strong> showDecorationSelected</td>
<td>项被选中是否突出显示装饰</td>
</tr>
<tr>
<td><strong>QString</strong> text</td>
<td>在项目中绘制的文本</td>
</tr>
<tr>
<td><strong>Qt::TextElideMode</strong> textElideMode</td>
<td>当项显示的文本太长时，省略号出现的位置</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::ViewItemPosition</strong> viewItemPosition</td>
<td>项目相对于其他项的位置</td>
</tr>
</tbody>
</table>
<div class="note info ">
  QStyleOptionViewItem::Position
</div>
<table>
<thead>
<tr>
<th>QStyleOptionViewItem::Position</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>QStyleOptionViewItem::Left</strong></td>
<td>文本左侧</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Right</strong></td>
<td>文本右侧</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Top</strong></td>
<td>文本上侧</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Bottom</strong></td>
<td>文本底侧</td>
</tr>
</tbody>
</table>
<div class="note info ">
  QStyleOptionViewItem::ViewItemFeatures
</div>
<table>
<thead>
<tr>
<th>QStyleOptionViewItem::ViewItemFeatures</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>QStyleOptionViewItem::None</strong></td>
<td>正常的项</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::WrapText</strong></td>
<td>项中文本可以换行</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Alternate</strong></td>
<td>项渲染方式</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::HasCheckIndicator</strong></td>
<td>项具有可选标志符（checkbox）</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::HasDisplay</strong></td>
<td>项具有Qt::DisplayRole</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::HasDecoration</strong></td>
<td>项具有Qt::DecorationRole</td>
</tr>
</tbody>
</table>
<div class="note info ">
  QStyleOptionViewItem::ViewItemPosition
</div>
<table>
<thead>
<tr>
<th>QStyleOptionViewItem::ViewItemPosition</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>QStyleOptionViewItem::Invalid</strong></td>
<td>未知，忽略</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Beginning</strong></td>
<td>项目位于行的开头</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::Middle</strong></td>
<td>项目位于行的中间</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::End</strong></td>
<td>项目位于行的结尾</td>
</tr>
<tr>
<td><strong>QStyleOptionViewItem::OnlyOne</strong></td>
<td>项目唯一（改行只有这一个）</td>
</tr>
</tbody>
</table>
<p>除以上成员变量外，从QStyleOption继承而来的成员变量对项目的绘制也有影响，其中有两个比较重要，如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-1">1</a></span><span>QRect rect;<span style="color:#75715e">// 表示项目的区域
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-2">2</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-3">3</a></span><span><span style="color:#75715e">// 绘制控件时的样式状态，state用于指示控件是否启用
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-4">4</a></span><span><span style="color:#75715e">// 是否被选择等状态
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-5">5</a></span><span><span style="color:#75715e"></span>QStyle<span style="color:#f92672">::</span>State state; 
</span></span></code></pre></div><h2 id="实例1">实例1</h2>
<p>mydelegate实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-1"> 1</a></span><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;mydelegate.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-2"> 2</a></span><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;QApplication&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-3"> 3</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-4"> 4</a></span><span>mydelegate<span style="color:#f92672">::</span>mydelegate(QObject <span style="color:#f92672">*</span>parent) <span style="color:#f92672">:</span> QAbstractItemDelegate(parent){}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-5"> 5</a></span><span>QSize mydelegate<span style="color:#f92672">::</span>sizeHint(<span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>{<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">QSize</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>);}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-6"> 6</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-7"> 7</a></span><span><span style="color:#66d9ef">void</span> mydelegate<span style="color:#f92672">::</span>paint(QPainter <span style="color:#f92672">*</span>painter, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>p1, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-8"> 8</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-9"> 9</a></span><span>    <span style="color:#75715e">// 为第一行第一列的项目绘制一个进度条
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-10">10</a></span><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(index.row() <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> index.column() <span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-11">11</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-12">12</a></span><span>        <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span>index.data().toInt();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-13">13</a></span><span>        QStyleOptionProgressBar p;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-14">14</a></span><span>        p.rect <span style="color:#f92672">=</span> p1.rect;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-15">15</a></span><span>        p.minimum<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-16">16</a></span><span>        p.maximum<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-17">17</a></span><span>        p.progress<span style="color:#f92672">=</span>i;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-18">18</a></span><span>        p.text<span style="color:#f92672">=</span>QString<span style="color:#f92672">::</span>number(i)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;%&#34;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-19">19</a></span><span>        p.textVisible<span style="color:#f92672">=</span>true;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-20">20</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-21">21</a></span><span>        <span style="color:#75715e">// 使用QStyle::drawControl函数绘制进度条
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-22">22</a></span><span><span style="color:#75715e"></span>        QApplication<span style="color:#f92672">::</span>style()<span style="color:#f92672">-&gt;</span>drawControl(QStyle<span style="color:#f92672">::</span>CE_ProgressBar,<span style="color:#f92672">&amp;</span>p,painter);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-23">23</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-24">24</a></span><span>    <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span>(index.row() <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&amp;&amp;</span> index.column() <span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>) <span style="color:#75715e">// 第2行第一列的项目
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-25"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-25">25</a></span><span><span style="color:#75715e"></span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-26"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-26">26</a></span><span>        QStyleOptionViewItem p;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-27"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-27">27</a></span><span>        p.index<span style="color:#f92672">=</span>index;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-28"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-28">28</a></span><span>        p.rect<span style="color:#f92672">=</span>p1.rect;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-29"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-29">29</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-30"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-30">30</a></span><span>        <span style="color:#75715e">// 显示图标，需要设置
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-31"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-31">31</a></span><span><span style="color:#75715e"></span>        p.features<span style="color:#f92672">=</span>QStyleOptionViewItem<span style="color:#f92672">::</span>HasDecoration<span style="color:#f92672">|</span>QStyleOptionViewItem<span style="color:#f92672">::</span>HasDisplay;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-32"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-32">32</a></span><span>        p.decorationSize<span style="color:#f92672">=</span>QSize(<span style="color:#ae81ff">55</span>,<span style="color:#ae81ff">55</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-33"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-33">33</a></span><span>        p.icon<span style="color:#f92672">=</span>index.data().value<span style="color:#f92672">&lt;</span>QIcon<span style="color:#f92672">&gt;</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-34"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-34">34</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-35"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-35">35</a></span><span>        p.state <span style="color:#f92672">=</span>p1.state;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-36"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-36">36</a></span><span>        p.showDecorationSelected<span style="color:#f92672">=</span>true;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-37"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-37">37</a></span><span>        p.displayAlignment<span style="color:#f92672">=</span>Qt<span style="color:#f92672">::</span>AlignLeft;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-38"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-38">38</a></span><span>        p.text<span style="color:#f92672">=</span>index.data().toString();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-39"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-39">39</a></span><span>        QApplication<span style="color:#f92672">::</span>style()<span style="color:#f92672">-&gt;</span>drawControl(QStyle<span style="color:#f92672">::</span>CE_ItemViewItem,<span style="color:#f92672">&amp;</span>p,painter);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-40"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-40">40</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-41"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-41">41</a></span><span>    <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span>(index.row() <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&amp;&amp;</span> index.column() <span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>)<span style="color:#75715e">// 第2行第0列的项目(绘制于其他地方)
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-42"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-42">42</a></span><span><span style="color:#75715e"></span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-43"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-43">43</a></span><span>        QStyleOptionViewItem p;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-44"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-44">44</a></span><span>        p.features<span style="color:#f92672">=</span>QStyleOptionViewItem<span style="color:#f92672">::</span>HasDisplay<span style="color:#f92672">|</span>QStyleOptionViewItem<span style="color:#f92672">::</span>HasCheckIndicator;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-45"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-45">45</a></span><span>        p.rect<span style="color:#f92672">=</span>QRect(<span style="color:#ae81ff">199</span>,<span style="color:#ae81ff">144</span>,<span style="color:#ae81ff">111</span>,<span style="color:#ae81ff">44</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-46"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-46">46</a></span><span>        p.state<span style="color:#f92672">=</span>p1.state;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-47"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-47">47</a></span><span>        p.showDecorationSelected<span style="color:#f92672">=</span>true;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-48"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-48">48</a></span><span>        p.text<span style="color:#f92672">=</span>index.data().toString();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-49"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-49">49</a></span><span>        p.backgroundBrush<span style="color:#f92672">=</span>QBrush(QColor(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">111</span>,<span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-50"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-50">50</a></span><span>        QFont f;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-51"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-51">51</a></span><span>        f.setPixelSize(<span style="color:#ae81ff">22</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-52"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-52">52</a></span><span>        p.font<span style="color:#f92672">=</span>f;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-53"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-53">53</a></span><span>        p.displayAlignment<span style="color:#f92672">=</span>Qt<span style="color:#f92672">::</span>AlignLeft<span style="color:#f92672">|</span>Qt<span style="color:#f92672">::</span>AlignCenter;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-54"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-54">54</a></span><span>        QApplication<span style="color:#f92672">::</span>style()<span style="color:#f92672">-&gt;</span>drawControl(QStyle<span style="color:#f92672">::</span>CE_ItemViewItem,<span style="color:#f92672">&amp;</span>p,painter);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-55"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-55">55</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-56"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-56">56</a></span><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-57"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-57">57</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-58"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-58">58</a></span><span>        <span style="color:#75715e">// 其他项目
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-59"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-59">59</a></span><span><span style="color:#75715e"></span>        QStyleOptionViewItem p;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-60"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-60">60</a></span><span>        p.features<span style="color:#f92672">=</span>QStyleOptionViewItem<span style="color:#f92672">::</span>HasDisplay;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-61"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-61">61</a></span><span>        p.index<span style="color:#f92672">=</span>index;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-62"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-62">62</a></span><span>        p.rect<span style="color:#f92672">=</span>p1.rect;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-63"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-63">63</a></span><span>        p.state<span style="color:#f92672">=</span>p1.state;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-64"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-64">64</a></span><span>        p.showDecorationSelected<span style="color:#f92672">=</span>true;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-65"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-65">65</a></span><span>        p.text<span style="color:#f92672">=</span>index.data().toString();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-66"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-66">66</a></span><span>        QApplication<span style="color:#f92672">::</span>style()<span style="color:#f92672">-&gt;</span>drawControl(QStyle<span style="color:#f92672">::</span>CE_ItemViewItem,<span style="color:#f92672">&amp;</span>p,painter);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-67"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-67">67</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-68"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-68">68</a></span><span>}
</span></span></code></pre></div><p>mywindow头文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-1"> 1</a></span><span><span style="color:#75715e">#ifndef MYWINDOW_H
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-2"> 2</a></span><span><span style="color:#75715e">#define MYWINDOW_H
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-3"> 3</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-4"> 4</a></span><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QWidget&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-5"> 5</a></span><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;QStandardItemModel&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-6"> 6</a></span><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;QTableView&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-7"> 7</a></span><span><span style="color:#75715e">#include</span><span style="color:#75715e">&#34;mydelegate.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-8"> 8</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-9"> 9</a></span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">mywindow</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> QWidget
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-10">10</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-11">11</a></span><span>    Q_OBJECT
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-12">12</a></span><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-13">13</a></span><span>    <span style="color:#66d9ef">explicit</span> mywindow(QWidget <span style="color:#f92672">*</span>parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-14">14</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-15">15</a></span><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-16">16</a></span><span>    QStandardItemModel<span style="color:#f92672">*</span> d;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-17">17</a></span><span>    QTableView<span style="color:#f92672">*</span> pv2;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-18">18</a></span><span>    mydelegate<span style="color:#f92672">*</span> pt;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-19">19</a></span><span>signals:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-20">20</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-21">21</a></span><span>};
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-22">22</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-23">23</a></span><span><span style="color:#75715e">#endif </span><span style="color:#75715e">// MYWINDOW_H
</span></span></span></code></pre></div><p>mywindow实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-1"> 1</a></span><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;mywindow.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-2"> 2</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-3"> 3</a></span><span>mywindow<span style="color:#f92672">::</span>mywindow(QWidget <span style="color:#f92672">*</span>parent) <span style="color:#f92672">:</span> QWidget(parent)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-4"> 4</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-5"> 5</a></span><span>    pv2<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> QTableView(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-6"> 6</a></span><span>    pv2<span style="color:#f92672">-&gt;</span>move(<span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">22</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-7"> 7</a></span><span>    pv2<span style="color:#f92672">-&gt;</span>resize(<span style="color:#ae81ff">333</span>,<span style="color:#ae81ff">222</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-8"> 8</a></span><span>    d<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> QStandardItemModel(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-9"> 9</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-10">10</a></span><span>    <span style="color:#75715e">// 添加数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-11">11</a></span><span><span style="color:#75715e"></span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,QModelIndex()),<span style="color:#e6db74">&#34;111&#34;</span>,Qt<span style="color:#f92672">::</span>DisplayRole);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-12">12</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>,QModelIndex()),<span style="color:#ae81ff">222</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-13">13</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,QModelIndex()),<span style="color:#ae81ff">33</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-14">14</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">0</span>,QModelIndex()),<span style="color:#e6db74">&#34;xxxx&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-15">15</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,QModelIndex()),QIcon(<span style="color:#e6db74">&#34;F:/1i.png&#34;</span>),Qt<span style="color:#f92672">::</span>DecorationRole);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-16">16</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,QModelIndex()),<span style="color:#ae81ff">11</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-17">17</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,QModelIndex()),<span style="color:#ae81ff">11</span>,Qt<span style="color:#f92672">::</span>ToolTipRole);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-18">18</a></span><span>    d<span style="color:#f92672">-&gt;</span>setData(d<span style="color:#f92672">-&gt;</span>index(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,QModelIndex()),<span style="color:#ae81ff">333</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-19">19</a></span><span>    pv2<span style="color:#f92672">-&gt;</span>setModel(d);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-20">20</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-21">21</a></span><span>    pt<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> mydelegate(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-22">22</a></span><span>    pv2<span style="color:#f92672">-&gt;</span>setItemDelegate(pt);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-23">23</a></span><span>}
</span></span></code></pre></div><p>main.cpp</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-1"> 1</a></span><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;widget.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-2"> 2</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-3"> 3</a></span><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QApplication&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-4"> 4</a></span><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;mywindow.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-5"> 5</a></span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-6"> 6</a></span><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[])
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-7"> 7</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-8"> 8</a></span><span>    QApplication a(argc, argv);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-9"> 9</a></span><span>    mywindow w;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-10">10</a></span><span>    w.resize(<span style="color:#ae81ff">444</span>,<span style="color:#ae81ff">355</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-11">11</a></span><span>    w.show();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-12">12</a></span><span>    <span style="color:#66d9ef">return</span> a.exec();
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-13">13</a></span><span>}
</span></span></code></pre></div><p>效果如下：
<img src="/articleImgs/qt/demo1.png" alt=""></p>
<h2 id="实例2">实例2</h2>
<p>只需要将下列代码，复制到mydelegate头文件和cpp文件中即可。
mydelegate头文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-1">1</a></span><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span>  <span style="color:#a6e22e">destroyEditor</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-2">2</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-3">3</a></span><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateEditorGeometry</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-4">4</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-5">5</a></span><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setModelData</span>(QWidget <span style="color:#f92672">*</span>editor, QAbstractItemModel <span style="color:#f92672">*</span>model, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-6">6</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-7">7</a></span><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setEditorData</span>(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-8">8</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-9">9</a></span><span>    <span style="color:#66d9ef">virtual</span> QWidget <span style="color:#f92672">*</span><span style="color:#a6e22e">createEditor</span>(QWidget <span style="color:#f92672">*</span>parent, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>;
</span></span></code></pre></div><p>mydelegate实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:1;-o-tab-size:1;tab-size:1;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-1"> 1</a></span><span><span style="color:#75715e">// 可以不实现，使用默认的也可以
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-2"> 2</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> mydelegate<span style="color:#f92672">::</span>destroyEditor(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-3"> 3</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-4"> 4</a></span><span>    <span style="color:#66d9ef">delete</span> editor;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-5"> 5</a></span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-6"> 6</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-7"> 7</a></span><span><span style="color:#75715e">// 设置编辑器的几何尺寸
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-8"> 8</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> mydelegate<span style="color:#f92672">::</span>updateEditorGeometry(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-9"> 9</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-10">10</a></span><span>    editor<span style="color:#f92672">-&gt;</span>setGeometry(option.rect);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-11">11</a></span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-12">12</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-13">13</a></span><span><span style="color:#75715e">// 重新setModelData将编辑器的数据写回模型
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-14">14</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> mydelegate<span style="color:#f92672">::</span>setModelData(QWidget <span style="color:#f92672">*</span>editor, QAbstractItemModel <span style="color:#f92672">*</span>model, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-15">15</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-16">16</a></span><span>    <span style="color:#66d9ef">if</span>(index.data().type()<span style="color:#f92672">==</span>QMetaType<span style="color:#f92672">::</span>QString<span style="color:#f92672">||</span>index.data().isNull())
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-17">17</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-18">18</a></span><span>        model<span style="color:#f92672">-&gt;</span>setData(index,((QLineEdit<span style="color:#f92672">*</span>)editor)<span style="color:#f92672">-&gt;</span>text());
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-19">19</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-20">20</a></span><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-21">21</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-22">22</a></span><span>        model<span style="color:#f92672">-&gt;</span>setData(index,((QSpinBox<span style="color:#f92672">*</span>)editor)<span style="color:#f92672">-&gt;</span>value());
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-23">23</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-24">24</a></span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-25"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-25">25</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-26"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-26">26</a></span><span><span style="color:#75715e">// 重写setEditorData以将单元格数据读入编辑器中
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-27"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-27">27</a></span><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> mydelegate<span style="color:#f92672">::</span>setEditorData(QWidget <span style="color:#f92672">*</span>editor, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-28"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-28">28</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-29"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-29">29</a></span><span>    <span style="color:#66d9ef">if</span>(index.data().type()<span style="color:#f92672">==</span>QMetaType<span style="color:#f92672">::</span>QString<span style="color:#f92672">||</span> index.data().isNull())
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-30"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-30">30</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-31"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-31">31</a></span><span>        ((QLineEdit<span style="color:#f92672">*</span>)editor)<span style="color:#f92672">-&gt;</span>setText(index.data().toString());
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-32"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-32">32</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-33"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-33">33</a></span><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-34"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-34">34</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-35"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-35">35</a></span><span>        ((QSpinBox<span style="color:#f92672">*</span>)editor)<span style="color:#f92672">-&gt;</span>setValue(index.data().toInt());
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-36"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-36">36</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-37"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-37">37</a></span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-38"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-38">38</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-39"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-39">39</a></span><span><span style="color:#75715e">// 重新实现createEditor以便为每个单元格创建各自的编辑器
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-40"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-40">40</a></span><span><span style="color:#75715e"></span>QWidget <span style="color:#f92672">*</span>mydelegate<span style="color:#f92672">::</span>createEditor(QWidget <span style="color:#f92672">*</span>parent, <span style="color:#66d9ef">const</span> QStyleOptionViewItem <span style="color:#f92672">&amp;</span>option, <span style="color:#66d9ef">const</span> QModelIndex <span style="color:#f92672">&amp;</span>index) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-41"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-41">41</a></span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-42"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-42">42</a></span><span>    <span style="color:#75715e">// 使用自定义的编辑器
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-43"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-43">43</a></span><span><span style="color:#75715e"></span>    QLineEdit<span style="color:#f92672">*</span> pe<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> QLineEdit(parent);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-44"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-44">44</a></span><span>    QSpinBox<span style="color:#f92672">*</span> ps<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> QSpinBox(parent);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-45"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-45">45</a></span><span>    pe<span style="color:#f92672">-&gt;</span>setObjectName(<span style="color:#e6db74">&#34;EEE&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-46"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-46">46</a></span><span>    ps<span style="color:#f92672">-&gt;</span>setObjectName(<span style="color:#e6db74">&#34;sss&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-47"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-47">47</a></span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-48"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-48">48</a></span><span>    <span style="color:#75715e">// 如果单元格的数据是文本或者无效数据，则使用pe编辑器进行编辑
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-49"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-49">49</a></span><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>(index.data().type()<span style="color:#f92672">==</span>QMetaType<span style="color:#f92672">::</span>QString <span style="color:#f92672">||</span> index.data().isNull())
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-50"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-50">50</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-51"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-51">51</a></span><span>        pe<span style="color:#f92672">-&gt;</span>setFocusPolicy(Qt<span style="color:#f92672">::</span>TabFocus);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-52"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-52">52</a></span><span>        <span style="color:#66d9ef">return</span> pe;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-53"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-53">53</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-54"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-54">54</a></span><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-55"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-55">55</a></span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-56"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-56">56</a></span><span>        ps<span style="color:#f92672">-&gt;</span>setMaximum(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-57"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-57">57</a></span><span>         <span style="color:#66d9ef">return</span> ps;;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-58"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-58">58</a></span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-59"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-59">59</a></span><span>}
</span></span></code></pre></div><p>实现的效果：
<img src="/articleImgs/qt/demo2_1.png" alt="">
<img src="/articleImgs/qt/demo2_2.png" alt=""></p>

    </div>
    <footer class="post-footer">
      

<div class="post-tags">
  
    <a href="/tags/qt-model-view">
    qt-Model-View
  </a>
</div>

<div class="addthis_inline_share_toolbox" style="text-align: center;"></div>
<hr/>



<div class="post-copyright">
  <img src="/imgs/cc/cc.svg" width="75" height="75" align="right" />
  <ul>
    <li class="post-copyright-title">
      <strong>文章标题：</strong>
      Qt 模型-视图：自定义委托
    </li>
    <li class="post-copyright-author">
      <strong>本文作者： </strong>
      孟方方
    </li>
    <li class="post-copyright-link"> 
      <strong>本文链接：</strong>
       <a id="post-cr-link" href="https://gitee.com/miffy-fly/Blog.git/post/qt/qtdelegate/" title="Qt 模型-视图：自定义委托">https://gitee.com/miffy-fly/Blog.git/post/qt/qtdelegate/</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target='_blank' href='https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh'>BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</div>

<div class="post-nav">
  <div class="post-nav-next post-nav-item">
    <a href="/miffy-fly/Blog.git/post/qt/qtcusview/" rel="next" title="Qt 模型-视图：自定义视图">
      <i class="fa fa-chevron-left"></i> Qt 模型-视图：自定义视图
    </a>
  </div>
  <div class="post-nav-prev post-nav-item">
    <a href="/miffy-fly/Blog.git/post/qt/qtcusmod/" rel="prev" title="Qt 模型-视图：自定义模型">
      Qt 模型-视图：自定义模型
      <i class="fa fa-chevron-right"></i>
    </a>
  </div>
</div>
    </footer>
  </article>
</div>
<div id="comments" class="post-comments">
  <div class="comment-head">
    <div class="comment-headline">
      <i class="fas fa-comments fa-fw"></i>
      <span>评论交流</span>
    </div>
    <div class="comment-switch">
      <span class="first-comment">Giscus</span>
      <span class="switch-btn "></span>
      <span class="second-comment">Waline</span>
    </div>
  </div>
  <div class="comment-wrap">
  
    <div><div class="comment-loading">
  <i class="fa fa-sync fa-spin"></i>
</div><div class="giscus-container"></div>
    </div>
    <div><div class="comment-loading">
  <i class="fa fa-sync fa-spin"></i>
</div><div class="waline-container"></div>
    </div>
  </div>
</div>

    </div>
  </main>
  <footer class="footer">
    <div class="footer-inner">

<div class="copyright">
  &copy;
  <span itemprop="copyrightYear">
    2020 - 2022
  </span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">孟方方</span>
</div>


    </div>
  </footer> 
  
  <script type="text/javascript" src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" defer></script>

<script class="next-config" data-name="main" type="application/json">{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://gitee.com/miffy-fly/Blog.git","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"unpkg","router":"https://unpkg.com"},"version":"4.3.1","waline":{"cfg":{"emoji":false,"imguploader":false,"pageview":"#waline-pageview-count","placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.11.3"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.11.3"}}}</script>







<script type="text/javascript" src="/miffy-fly/Blog.git/js/main.min.a4d8b33d4c8124fe3decce5ba14a2fb8a224b7b21d44ff1628572420961912bf.js" defer></script>











</body>

</html>